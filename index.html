<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Game Loader with Fullscreen</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
  background-color: black;
  color: white;
}
/* Search bar styling */
#search-container {
  padding: 10px;
  background-color: #111;
  display: flex;
  justify-content: center;
}

/* Search input */
#search-box {
  width: 60%;
  max-width: 500px;
  padding: 8px 12px;
  font-size: 16px;
  border: 2px solid #ccc;
  border-radius: 4px;
}

/* Top bar for fullscreen exit button */
#fullscreen-topbar {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 40px;
  background: #444;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 0 10px;
}
#exit-fullscreen-btn {
  background: #555;
  color: #fff;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
}
#exit-fullscreen-btn:hover {
  background: #777;
}

/* Popup styles */
#popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: #222;
  border-radius: 10px;
  border: 2px solid #fff;
  max-width: 80%;
  width: 600px;
  max-height: 80%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 9998;
}
#popup-header {
  background: #333;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px;
}
#popup-header h2 {
  margin: 0;
  font-size: 16px;
}
#popup-close {
  background: none;
  border: none;
  color: #fff;
  font-size: 20px;
  cursor: pointer;
}
#popup-content {
  flex: 1;
  position: relative;
}
#game-iframe {
  width: 100%;
  height: 100%;
  border: none;
}
</style>
</head>
<body>

<div id="search-container">
  <form id="search-form" onsubmit="return false;">
    <input type="text" id="search-box" placeholder="Type filename..." />
  </form>
</div>

<!-- Top bar for exit fullscreen -->
<div id="fullscreen-topbar">
  <button id="exit-fullscreen-btn">Exit Fullscreen</button>
</div>

<!-- Popup for game -->
<div id="popup">
  <div id="popup-header">
    <h2 id="popup-title"></h2>
    <button id="popup-close">&times;</button>
  </div>
  <div id="popup-content">
    <!-- iframe will be inserted here dynamically -->
  </div>
</div>

<script>
const validFiles = ['survivalrace.html', 'amongus.html', '1v1lol.html', 'snowrider.html', 'pollytrack.html', 'smashyroad.html'];
const popup = document.getElementById('popup');
const popupTitle = document.getElementById('popup-title');
const popupCloseBtn = document.getElementById('popup-close');
const iframeContainer = document.getElementById('popup-content');
const topbar = document.getElementById('fullscreen-topbar');
const exitFullscreenBtn = document.getElementById('exit-fullscreen-btn');

let iframe = null;

// Handle search
document.getElementById('search-form').onsubmit = () => {
  const filename = document.getElementById('search-box').value.trim();
  if (filename.toLowerCase() === 'password') {
    alert(`8 Ball - "8ball.html"\nCar Arena - "car-arena.html"\nFlappy Dunk - "flappy-dunk.html"\nSnow Rider 3d - "snow-rider.html"\nPolly Track - "polly-track.html"\nMinecraft-parkour - "mine-park.html"\nSmashy Road - "escape-dunk.html"\nAmong Us - "amongus.html"\n1v1.lol - "1v1lol.html"`);
  } else if (validFiles.includes(filename.toLowerCase())) {
    if (iframe) {
      iframe.remove();
    }
    iframe = document.createElement('iframe');
    iframe.src = filename;
    iframe.id = 'game-iframe';
    iframe.style.width = '100%';
    iframe.style.height = '100%';
    iframeContainer.appendChild(iframe);
    popup.style.display = 'flex';
    // Reset fullscreen
    iframe.classList.remove('fullscreen');
    hideTopbar();
  } else {
    window.open('https://www.google.com/search?q=' + encodeURIComponent(filename), '_blank');
  }
  return false;
};

popupCloseBtn.onclick = () => {
  popup.style.display='none';
  if (iframe) {
    iframe.remove();
  }
  hideTopbar();
};

// Show top bar
function showTopbar() {
  topbar.style.display='flex';
}
// Hide top bar
function hideTopbar() {
  topbar.style.display='none';
}

// Enter fullscreen (via API or fallback)
function enterFullscreen() {
  if (!iframe) return;
  if (iframe.requestFullscreen) {
    iframe.requestFullscreen();
  } else if (iframe.webkitRequestFullscreen) { /* Safari */
    iframe.webkitRequestFullscreen();
  } else if (iframe.msRequestFullscreen) { /* IE11 */
    iframe.msRequestFullscreen();
  } else {
    // fallback: make iframe cover entire viewport
    iframe.classList.add('fullscreen');
  }
  showTopbar();
}

// Exit fullscreen
function exitFullscreen() {
  if (document.fullscreenElement) {
    document.exitFullscreen();
  } else {
    // fallback
    iframe.classList.remove('fullscreen');
  }
  hideTopbar();
}

// Button event
document.getElementById('exit-fullscreen-btn').onclick = () => {
  exitFullscreen();
};
</script>
</body>
</html>
